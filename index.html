<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Nettorechner – Tarifgegenüberstellung</title>

<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#f8fafc;margin:0;padding:1rem;color:#0b1020}
.container{max-width:1100px;margin:auto;background:#fff;border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,.1);padding:20px}
h1{text-align:center;color:#1d4ed8;margin-bottom:10px}

.grid3{display:grid;grid-template-columns:280px 1fr 1fr}
.hdr{padding:10px;font-weight:600;color:#fff;text-align:center}
.hdrL{background:#059669}
.hdrR{background:#6d28d9}

.rowlabel{padding:8px;font-weight:600;border-top:1px solid #e5e7eb;background:#eff6ff}
.cell{border-top:1px solid #e5e7eb;padding:8px;text-align:right}

input{border:1px solid #e2e8f0;border-radius:8px;padding:6px 8px;width:120px;text-align:right}
input.text{width:220px;text-align:left}
input.red{color:#dc2626;border-color:#fecaca;font-weight:700}

select{padding:6px;border-radius:8px}
button{padding:8px 14px;border:none;border-radius:8px;background:#2563eb;color:#fff;font-weight:600;cursor:pointer}
button:hover{background:#1e40af}

.bgL{background:#d1fae5}
.bgR{background:#ede9fe}
.bold{font-weight:700}

.note{font-size:12px;color:#334155;margin-top:20px}
</style>
</head>

<body>
<div class="container">

<h1>Tarifgegenüberstellung</h1>

<!-- Kopf -->
<div style="display:flex;flex-wrap:wrap;gap:10px;align-items:end;justify-content:space-between;margin-bottom:12px">
  <div>
    <label>Linker Tarif<br>
      <input class="text" id="labelL" value="Tarif A / Bestand">
    </label>
  </div>
  <div>
    <label>Rechter Tarif<br>
      <input class="text" id="labelR" value="Tarif B / Vorschlag">
    </label>
  </div>
  <div>
    <label>Profil<br>
      <select id="profil">
        <option>Arbeitnehmer</option>
        <option>Selbstständig</option>
      </select>
    </label>
  </div>
  <button onclick="window.print()">Drucken</button>
</div>

<!-- Tabelle -->
<div class="grid3">
  <div class="hdr" style="background:#1d4ed8"></div>
  <div class="hdr hdrL" id="hdrL">Tarif A</div>
  <div class="hdr hdrR" id="hdrR">Tarif B</div>

<script>
const felder=[
["g","GesundheitVARIO inkl. RZ/GZ"],
["bea","Beitragsentlastung / BEA"],
["ppv","Pflegepflichtversicherung"],
["vap","VARIOAmbulant Plus"],
["vkp","VARIOKlinik Plus"],
["vzp","VARIOZahn Plus"],
["ktg","Krankentagegeld"],
["kur","Kurtagegeld"],
["kht","KHT"],
["pzv","Pflegezusatzversicherung"]
];

document.write(felder.map(f=>`
<div class="rowlabel">${f[1]}</div>
<div class="cell bgL"><input type="number" id="L_${f[0]}" value="0"></div>
<div class="cell bgR"><input type="number" id="R_${f[0]}" value="0"></div>
`).join(""));
</script>

<!-- Steuer -->
<div class="rowlabel" style="color:#dc2626">Grenzsteuersatz</div>
<div class="cell"><input id="steuer" class="red" value="42"></div>
<div class="cell"></div>
</div>

<!-- Ergebnis -->
<div id="out" style="margin-top:20px"></div>

<script>
function n(v){return parseFloat(v)||0}
function f(x){return x.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})}

function calc(){
 const profil=document.getElementById("profil").value;
 const s=n(steuer.value)/100;

 const L={},R={};
 felder.forEach(f=>{
   L[f[0]]=n(document.getElementById("L_"+f[0]).value);
   R[f[0]]=n(document.getElementById("R_"+f[0]).value);
 });

 const sumL=Object.values(L).reduce((a,b)=>a+b,0);
 const sumR=Object.values(R).reduce((a,b)=>a+b,0);

 const abzL=0.9136*(L.g+L.bea)+L.ppv;
 const abzR=0.9136*(R.g+R.bea)+R.ppv;

 const caps={group:508.59,care:104.63};

 const grpL=L.g+L.bea+L.vap+L.vkp+L.vzp+L.ktg+L.kur+L.kht+L.pzv;
 const grpR=R.g+R.bea+R.vap+R.vkp+R.vzp+R.ktg+R.kur+R.kht+R.pzv;

 const agL=Math.min(0.5*grpL,caps.group)+Math.min(0.5*L.ppv,caps.care);
 const agR=Math.min(0.5*grpR,caps.group)+Math.min(0.5*R.ppv,caps.care);

 let nettoL,nettoR;

 if(profil==="Arbeitnehmer"){
   nettoL=(sumL-agL)-(s*Math.max(0,abzL-agL));
   nettoR=(sumR-agR)-(s*Math.max(0,abzR-agR));
 } else {
   nettoL=sumL-(s*abzL);
   nettoR=sumR-(s*abzR);
 }

 const diff=nettoR-nettoL;

 document.getElementById("hdrL").innerText=labelL.value;
 document.getElementById("hdrR").innerText=labelR.value;

 out.innerHTML=`
 <div class="grid3">
   <div class="rowlabel bold">Gesamtbetrag nach Steuer</div>
   <div class="cell bold bgL">${f(nettoL)} €</div>
   <div class="cell bold bgR">${f(nettoR)} €</div>

   <div class="rowlabel bold">Gutschrift nach Steuer</div>
   <div></div>
   <div class="cell bold">${f(diff)} €</div>
 </div>`;
}

document.querySelectorAll("input,select").forEach(e=>e.addEventListener("input",calc));
calc();
</script>

<div class="note">
Der Rechner wurde von Jürgen Matterne erstellt. Es wurde Sorgfalt verwandt, es kann aber keine Gewähr übernommen werden.
Fragen bitte an: <a href="mailto:Juergen.Matterne@vk-makler.de">Juergen.Matterne@vk-makler.de</a><br>
Arbeitgeber-Höchstzuschuss (AN): 508,59 € KV / 104,63 € Pflege. Steuerlich ansetzbar: GesundheitVARIO 91,36 %, Pflegepflicht 100 %.
</div>

</div>
</body>
</html>


